{% extends 'base.html' %}
{% load static %}

{% block content %}
<div style="max-width: 1200px; margin: 40px auto; padding: 20px;">
    <h2>Admin Dashboard</h2>
    <div style="display: flex; gap: 20px; margin-bottom: 40px;">
        <div style="flex: 1; padding: 20px; background: #fff; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); text-align: center;">
            <h3 style="margin: 0; color: #64748b;">Total Users</h3>
            <p style="font-size: 2.5rem; font-weight: 700; color: #0f172a; margin: 10px 0;">{{ total_users }}</p>
        </div>
        <div style="flex: 1; padding: 20px; background: #fff; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); text-align: center;">
            <h3 style="margin: 0; color: #64748b;">Total Events</h3>
            <p style="font-size: 2.5rem; font-weight: 700; color: #0f172a; margin: 10px 0;">{{ total_events }}</p>
        </div>
    </div>

    <div style="background: #fff; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); padding: 20px; margin-bottom: 30px;">
        <h3>Users</h3>
        <table style="width: 100%; border-collapse: collapse; margin-top: 15px;">
            <thead>
                <tr style="background: #f8fafc; text-align: left;">
                    <th style="padding: 12px; border-bottom: 2px solid #e2e8f0;">Username</th>
                    <th style="padding: 12px; border-bottom: 2px solid #e2e8f0;">Email</th>
                    <th style="padding: 12px; border-bottom: 2px solid #e2e8f0;">Role</th>
                    <th style="padding: 12px; border-bottom: 2px solid #e2e8f0;">Date Joined</th>
                    <th style="padding: 12px; border-bottom: 2px solid #e2e8f0;">Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for u in users %}
                <tr style="border-bottom: 1px solid #e2e8f0;">
                    <td style="padding: 12px;">{{ u.username }}</td>
                    <td style="padding: 12px;">{{ u.email }}</td>
                    <td style="padding: 12px;">
                        {% if u.userprofile %}
                            {{ u.userprofile.get_role_display }}
                        {% else %}
                            User (Default)
                        {% endif %}
                    </td>
                    <td style="padding: 12px;">{{ u.date_joined|date:"M d, Y" }}</td>
                    <td style="padding: 12px;">
                        <a href="{% url 'edit_user' u.id %}" style="color: #3b82f6; text-decoration: none; margin-right: 10px;">Edit</a>
                        <a href="{% url 'delete_user' u.id %}" style="color: #ef4444; text-decoration: none;">Delete</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
